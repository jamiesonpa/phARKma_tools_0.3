how to connect to ec2 aws

first change permissions for the public key file

    >chmod 0400 pierce_admin.pem

be sure to replace "pierce_admin.pem" with whatever the private key is that you created when launching the instance

now open wsl and ssh into the server

    >ssh -i pierce_admin.pem ubuntu@ec2-3-131-36-253.us-east-2.compute.amazonaws.com

where the address at the end there is the public ipv4 of your instance

run updates

    >sudo apt-get update
    >sudo apt-get upgrade

if mongodb is not already installed, install it using these commands

    >wget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add -
    >sudo apt-get install gnupg
    >wget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key add -
    >echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
    >sudo apt-get update
    >sudo apt-get install -y mongodb-org

now you can start the mongodb process using

    >sudo systemctl start mongod

now check to see that it is online

    >sudo systemctl status mongod

make sure that it is set to start automatically on boot

    >sudo systemctl enable mongod


now type

    >mongo

to connect to the db.

To check the config of the mongodb type

    >sudo nano /etc/mongod.conf

and you should be able to see that the bind IP and the port are listed there for you. change the bind ip from 127.0.0.1 to 0.0.0.0 in order to allow the db to be accessed outside of this server.

Now, take note of the port, which is 27017 in my case. 

Now go into the aws dashboard and go to the security groups on your instance. Go to "Edit inbound rules" and create a new custom TCP rule where the port is 27017 and the source is "anywhere IpV4", and the 
name is "mongodb" and save.

now open mongodb compass and put in this connection string

mongodb://{USERNAME}:{PASSWORD}@{EC2 INSTANCE IP / HOSTNAME}/{DATABASENAME}
